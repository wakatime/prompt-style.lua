#!/usr/bin/env -S nvim --headless -l
local utils = require "prompt.utils"

if require "prompt".name == "lua" then
    -- luacheck: ignore 111 113
    ---@diagnostic disable: undefined-global
    local file = vim.fs.joinpath(vim.fn.stdpath("config"), "init.vim")
    if vim.fn.filereadable(file) == 1 then
        vim.cmd.source(file)
    end
    file = vim.fs.joinpath(vim.fn.stdpath("config"), "init.lua")
    if vim.fn.filereadable(file) == 1 then
        loadfile(file)()
    end
end

-- use ~/.config/nvim/init.vim
utils.main(arg, {}, function(args)
    if args.v then
        vim.cmd.version()
        os.exit(0)
    end
    return args
end)
-- ex: filetype=lua
